{% extends "bootstrap/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}User's Page{% endblock %}
{% block navbar %}
<div class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Event Planner</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
            </ul>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="/logout">Log out</a></li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="container">
    {% for message in get_flashed_messages() %}
    <div class="alert alert-warning">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        {{ message }}
    </div>
    {% endfor %}

    {% block page_content %}
        <div class="page-header">
            <h1>MAIN USER PAGE</h1>
        </div>
        <h2>All Events List</h2>
        <ul>
            {% for event_data in events_data %}
            <li>
                {{ event_data }}
                <form action="{{ url_for('user.submit_rating') }}" method="post">
                    <input type="hidden" name="event_id" value="{{ event_data.id }}">
                    <label for="rating">Rate this event:</label>
                    <select name="rating" id="rating">
                        <option value="1">1 (Poor)</option>
                        <option value="2">2 (Fair)</option>
                        <option value="3">3 (Good)</option>
                        <option value="4">4 (Very Good)</option>
                        <option value="5">5 (Excellent)</option>
                    </select>
                    <button type="submit">Submit Rating</button>
                </form>
            </li>
            {% endfor %}
            <!-- The for loop block below is only for testing to see if user inputs for ratings are actually being stored in the database  -->
            {% for event_rating in events_ratings %}
            <li>{{event_rating}}</li>
            {% endfor %}  
        </ul>
    {% endblock %}
</div>
{% endblock %}